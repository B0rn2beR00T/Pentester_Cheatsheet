# Протокол SMB

## Поиск сетевых папок SMB. Перечисление шар и файлов

С помощью утилиты smbtree можно обнаружить компьютеры Windows с сетевыми шарами:
~~~bash
sudo smbtree -N
~~~
С помощью утилиты smbclient можно просмотреть имеющиеся на компьютере совместные папки:
~~~bash
sudo smbclient -L \\ИМЯ-КОМПЬЮТЕРА -N
~~~
Также с помощью smbclient, используя команду следующего вида, можно подключиться к сетевой папке и выполнить обычные файловые операции:
~~~bash
sudo smbclient //ИМЯ-КОМПЬЮТЕРА/Папка -N
~~~
В предыдущих двух командах используется опция -N для входа без пароля. Если вы хотите подключиться к папке, требующей аутентификации, то используйте опцию -U после которой укажите имя пользователя, а опцию -N уберите.

Поиск SMB по открытым портам
SMB использует порты 445 и 139, поэтому компьютеры с сетевыми шарами можно искать с помощью Nmap командой вида:
~~~bash
sudo nmap СЕТЬ -p 139,445
~~~
Например:
~~~bash
sudo nmap 192.168.0.0/24 -p 139,445
~~~
